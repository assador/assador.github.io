(function(){"use strict";var t={8019:function(t,e,n){var r=n(7195),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("TestData"),e("hr"),e("TestVuex")],1)},s=[],o=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("Без Vuex")]),e("form",{attrs:{action:"javascript:void(0)"},on:{submit:t.post}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"number",required:""},domProps:{value:t.price},on:{input:[function(e){e.target.composing||(t.price=e.target.value)},function(e){return t.changed("price")}]}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{type:"number",required:""},domProps:{value:t.qty},on:{input:[function(e){e.target.composing||(t.qty=e.target.value)},function(e){return t.changed("qty")}]}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",required:""},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},function(e){return t.changed("amount")}]}}),e("button",{attrs:{type:"submit"}},[t._v("button 4")]),e("div",[t._v("price: "+t._s(t.labels.price))]),e("div",[t._v("qty: "+t._s(t.labels.qty))]),e("div",[t._v("amount: "+t._s(t.labels.amount))]),e("pre",[t._v("localStorage: "+t._s(JSON.stringify(t.$parent.localStorage,null,"  ")))])]),e("h3",[t._v("Сообщения:")]),e("div",t._l(t.messages,(function(n,r){return e("pre",{key:r},[t._v(t._s(n))])})),0)])},a=[],u=(n(541),n(7658),{name:"TestData",props:{},data(){return{nonce:0,price:0,qty:0,amount:0,labels:{price:0,qty:0,amount:0},order:[],messages:[]}},watch:{price(){setTimeout((()=>this.labels.price=this.price),300)},qty(){setTimeout((()=>this.labels.qty=this.qty),300)},amount(){setTimeout((()=>this.labels.amount=this.amount),300)}},methods:{async post(){const t={price:this.price,qty:this.qty,amount:this.amount,nonce:this.nonce};let e=new Promise(((e,n)=>{setTimeout((()=>{t.amount%2===0?e({success:!0}):n({success:!1})}),1e3)}));this.messages.unshift(`Отправлено: ${JSON.stringify(t,null,"  ")}\nСейчас в localStorage: ${JSON.stringify(this.$parent.localStorage,null,"  ")}`),e.then((e=>{this.$parent.toLocalStorage(t),this.messages.unshift(`Ответ: ${JSON.stringify(e,null,"  ")}\nСейчас в localStorage: ${JSON.stringify(this.$parent.localStorage,null,"  ")}`)})).catch((t=>{this.messages.unshift(`Ответ: ${JSON.stringify(t,null,"  ")}\nСейчас в localStorage: ${JSON.stringify(this.$parent.localStorage,null,"  ")}`)}))},changed(t){let e="";const n=this.order.indexOf(t);switch(-1!==n&&this.order.splice(n,1),this.order[0]){case"price":if(0==this.qty){e="Попытка вычислить “price”, поделив “amount” на нулевую “qty”.";break}this.price=this.amount/this.qty,e="Пересчиталась “price”.";break;case"qty":if(0==this.price){e="Попытка вычислить “qty”, поделив “amount” на нулевую “price”.";break}this.qty=this.amount/this.price,e="Пересчиталась “qty”.";break;case"amount":this.amount=this.price*this.qty,e="Пересчиталась “amount”.";break}this.order.push(t),e=`Раньше других менялась “${this.order[0]}”. ${e}`,this.messages.unshift(e),this.nonce++}}}),c=u,l=n(1001),p=(0,l.Z)(c,o,a,!1,null,"0a5ec9dc",null),m=p.exports,h=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("С Vuex")]),e("form",{attrs:{action:"javascript:void(0)"},on:{submit:t.post}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"number",required:""},domProps:{value:t.price},on:{input:[function(e){e.target.composing||(t.price=e.target.value)},function(e){return t.changed("price")}]}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{type:"number",required:""},domProps:{value:t.qty},on:{input:[function(e){e.target.composing||(t.qty=e.target.value)},function(e){return t.changed("qty")}]}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",required:""},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},function(e){return t.changed("amount")}]}}),e("button",{attrs:{type:"submit"}},[t._v("button 4")]),e("div",[t._v("price: "+t._s(t.$store.state.price))]),e("div",[t._v("qty: "+t._s(t.$store.state.qty))]),e("div",[t._v("amount: "+t._s(t.$store.state.amount))]),e("pre",[t._v("localStorage: "+t._s(JSON.stringify(t.$parent.localStorage,null,"  ")))])]),e("h3",[t._v("Сообщения:")]),e("div",t._l(t.messages,(function(n,r){return e("pre",{key:r},[t._v(t._s(n))])})),0)])},d=[],f={name:"TestData",props:{},data(){return{nonce:0,price:0,qty:0,amount:0,order:[],messages:[]}},watch:{price(){setTimeout((()=>this.$store.dispatch("setValues",{price:this.price})),300)},qty(){setTimeout((()=>this.$store.dispatch("setValues",{qty:this.qty})),300)},amount(){setTimeout((()=>this.$store.dispatch("setValues",{amount:this.amount})),300)}},methods:{async post(){const t={price:this.$store.state.price,qty:this.$store.state.qty,amount:this.$store.state.amount,nonce:this.$store.state.nonce};let e=new Promise(((e,n)=>{setTimeout((()=>{t.amount%2===0?e({success:!0}):n({success:!1})}),1e3)}));this.messages.unshift(`Отправлено: ${JSON.stringify(t,null,"  ")}\nСейчас в localStorage: ${JSON.stringify(this.$parent.localStorage,null,"  ")}`),e.then((e=>{this.$parent.toLocalStorage(t),this.messages.unshift(`Ответ: ${JSON.stringify(e,null,"  ")}\nСейчас в localStorage: ${JSON.stringify(this.$parent.localStorage,null,"  ")}`)})).catch((t=>{this.messages.unshift(`Ответ: ${JSON.stringify(t,null,"  ")}\nСейчас в localStorage: ${JSON.stringify(this.$parent.localStorage,null,"  ")}`)}))},changed(t){let e="";const n=this.order.indexOf(t);switch(-1!==n&&this.order.splice(n,1),this.order[0]){case"price":if(0==this.qty){e="Попытка вычислить “price”, поделив “amount” на нулевую “qty”.";break}this.price=this.amount/this.qty,e="Пересчиталась “price”.";break;case"qty":if(0==this.price){e="Попытка вычислить “qty”, поделив “amount” на нулевую “price”.";break}this.qty=this.amount/this.price,e="Пересчиталась “qty”.";break;case"amount":this.amount=this.price*this.qty,e="Пересчиталась “amount”.";break}this.order.push(t),e=`Раньше других менялась “${this.order[0]}”. ${e}`,this.messages.unshift(e),this.nonce++,this.$store.dispatch("setValues",{nonce:this.nonce})}}},g=f,v=(0,l.Z)(g,h,d,!1,null,"1eb3dfe8",null),y=v.exports,q={name:"App",components:{TestData:m,TestVuex:y},data(){return{localStorage:{nonce:window.localStorage.getItem("nonce"),price:window.localStorage.getItem("price"),qty:window.localStorage.getItem("qty"),amount:window.localStorage.getItem("amount")}}},watch:{localStorage:{deep:!0,immediate:!0,handler(t){for(let e in t)window.localStorage.setItem(e,t[e])}}},methods:{toLocalStorage(t){this.localStorage=t}}},b=q,S=(0,l.Z)(b,i,s,!1,null,null,null),$=S.exports,_=n(408);r.ZP.use(_.ZP);const w=new _.ZP.Store({state:{nonce:0,price:0,qty:0,amount:0},mutations:{setValue(t,e){r.ZP.set(t,e.key,e.value)}},actions:{setValues({commit:t},e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r={};r.key=n,r.value=e[n],t("setValue",r)}}}});r.ZP.config.productionTip=!1,new r.ZP({store:w,render:t=>t($)}).$mount("#app")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,s){if(!r){var o=1/0;for(l=0;l<t.length;l++){r=t[l][0],i=t[l][1],s=t[l][2];for(var a=!0,u=0;u<r.length;u++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(a=!1,s<o&&(o=s));if(a){t.splice(l--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[r,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,s,o=r[0],a=r[1],u=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(u)var l=u(n)}for(e&&e(r);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(l)},r=self["webpackChunktest"]=self["webpackChunktest"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(8019)}));r=n.O(r)})();
//# sourceMappingURL=app.951c8711.js.map